# å¤šå› å­é€‰è‚¡ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å¤šå› å­é€‰è‚¡ç³»ç»Ÿï¼Œé›†æˆäº†å› å­è®¡ç®—ã€æœºå™¨å­¦ä¹ å»ºæ¨¡ã€è‚¡ç¥¨é€‰æ‹©ã€ç»„åˆä¼˜åŒ–å’Œå›æµ‹éªŒè¯ç­‰åŠŸèƒ½ã€‚

### æœ¬ç³»ç»Ÿä»…é™äºå­¦ä¹ äº¤æµï¼Œéœ€è¦äºŒæ¬¡å¼€å‘æˆ–å®šåˆ¶åŒ–å¼€å‘ï¼Œè¯·è”ç³» 39189996@qq.com

### æ•°æ®åº“ä¸‹è½½åœ°å€ï¼š
-- é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šstock_cursor.sql.zip
-- é“¾æ¥: https://pan.baidu.com/s/1vOtkLP8pQEU8k0pGRaYwUw?pwd=q4mg æå–ç : q4mg

![ç³»ç»Ÿä¸»ç•Œé¢](./images/1-2.png)

## ğŸŒŸ ç³»ç»Ÿç‰¹è‰²

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ“Š å› å­ç®¡ç†**: å†…ç½®12ä¸ªå¸¸ç”¨å› å­ï¼Œæ”¯æŒè‡ªå®šä¹‰å› å­åˆ›å»º
- **ğŸ¤– æœºå™¨å­¦ä¹ **: æ”¯æŒéšæœºæ£®æ—ã€XGBoostã€LightGBMç­‰ç®—æ³•
- **ğŸ¯ æ™ºèƒ½é€‰è‚¡**: åŸºäºå› å­å’ŒMLæ¨¡å‹çš„å¤šç§é€‰è‚¡ç­–ç•¥
- **ğŸ“ˆ ç»„åˆä¼˜åŒ–**: ç­‰æƒé‡ã€å‡å€¼-æ–¹å·®ã€é£é™©å¹³ä»·ç­‰ä¼˜åŒ–æ–¹æ³•
- **ğŸ”„ å›æµ‹éªŒè¯**: å®Œæ•´çš„ç­–ç•¥å›æµ‹å’Œå¤šç­–ç•¥æ¯”è¾ƒ
- **ğŸ“‹ åˆ†ææŠ¥å‘Š**: è¡Œä¸šåˆ†æã€å› å­è´¡çŒ®åº¦ç­‰æ·±åº¦åˆ†æ

![ç³»ç»ŸåŠŸèƒ½æ¦‚è§ˆ](./images/1-3.png)

### æŠ€æœ¯æ¶æ„
- **åç«¯**: Python 3.8+ / Flask / SQLAlchemy
- **æ•°æ®å¤„ç†**: Pandas / NumPy / Scikit-learn
- **æœºå™¨å­¦ä¹ **: XGBoost / LightGBM / CVXPY
- **å‰ç«¯**: Bootstrap 5 / JavaScript
- **æ•°æ®åº“**: MySQL / SQLite

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚
- Python 3.8+
- MySQL 5.7æˆ–8.x

### 2. å®‰è£…ä¾èµ–
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd quantitative_analysis

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3. å¯åŠ¨ç³»ç»Ÿ
```bash
# ä½¿ç”¨å¯åŠ¨è„šæœ¬
python run_system.py

# æˆ–è€…ç›´æ¥è¿è¡Œï¼ˆæ¨èï¼‰
python app.py
```
# é‡åˆ°ä»¥ä¸‹é—®é¢˜
```
Traceback (most recent call last):
  File "/root/stock/run.py", line 9, in <module>
    app = create_app(os.getenv('FLASK_ENV', 'default'))

æ‰§è¡Œï¼špip install eventlet
```

![ç³»ç»Ÿå¯åŠ¨ç•Œé¢](./images/1-4.png)

### 4. è®¿é—®ç³»ç»Ÿ
- Webç•Œé¢: http://localhost:5000
- APIæ–‡æ¡£: http://localhost:5000/api

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç³»ç»Ÿå¯åŠ¨å™¨
è¿è¡Œ `python run_system.py` åï¼Œé€‰æ‹©ç›¸åº”æ“ä½œï¼š

1. **æ£€æŸ¥ç³»ç»Ÿä¾èµ–** - éªŒè¯Pythonç‰ˆæœ¬å’Œå¿…éœ€åŒ…
2. **åˆå§‹åŒ–æ•°æ®åº“** - åˆ›å»ºæ•°æ®è¡¨å’Œå†…ç½®å› å­
3. **å¯åŠ¨WebæœåŠ¡å™¨** - å¯åŠ¨å¼€å‘æ¨¡å¼æœåŠ¡å™¨
4. **å¯åŠ¨WebæœåŠ¡å™¨(ç”Ÿäº§æ¨¡å¼)** - å¯åŠ¨ç”Ÿäº§æ¨¡å¼æœåŠ¡å™¨
5. **è¿è¡Œç³»ç»Ÿæ¼”ç¤º** - æ‰§è¡Œå®Œæ•´åŠŸèƒ½æ¼”ç¤º
6. **æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯** - æŸ¥çœ‹ç³»ç»ŸåŠŸèƒ½æ¦‚è§ˆ

![ç³»ç»Ÿå¯åŠ¨é€‰é¡¹](./images/1-5.png)

### Webç•Œé¢æ“ä½œ

#### 1. ä»ªè¡¨ç›˜
- æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯
- å¿«é€Ÿè®¿é—®ä¸»è¦åŠŸèƒ½

![ä»ªè¡¨ç›˜ç•Œé¢](./images/1-6.png)

#### 2. å› å­ç®¡ç†
- æŸ¥çœ‹å†…ç½®å› å­åˆ—è¡¨
- åˆ›å»ºè‡ªå®šä¹‰å› å­
- è®¡ç®—å› å­å€¼

![å› å­ç®¡ç†ç•Œé¢](./images/1-7.png)

![å› å­åˆ—è¡¨](./images/1-8.png)

#### 3. æ¨¡å‹ç®¡ç†
- åˆ›å»ºæœºå™¨å­¦ä¹ æ¨¡å‹
- è®­ç»ƒæ¨¡å‹
- æ¨¡å‹é¢„æµ‹

![æ¨¡å‹ç®¡ç†ç•Œé¢](./images/1-9.png)

![æ¨¡å‹è®­ç»ƒ](./images/1-10.png)

#### 4. è‚¡ç¥¨é€‰æ‹©
- åŸºäºå› å­çš„é€‰è‚¡
- åŸºäºMLæ¨¡å‹çš„é€‰è‚¡
- é…ç½®é€‰è‚¡å‚æ•°

![è‚¡ç¥¨é€‰æ‹©ç•Œé¢](./images/1-11.png)

![é€‰è‚¡ç»“æœ](./images/1-12.png)

#### 5. ç»„åˆä¼˜åŒ–
- å¤šç§ä¼˜åŒ–æ–¹æ³•
- çº¦æŸæ¡ä»¶è®¾ç½®
- æƒé‡åˆ†é…ç»“æœ

![ç»„åˆä¼˜åŒ–ç•Œé¢](./images/1-13.png)

![ä¼˜åŒ–ç»“æœ](./images/1-14.png)

#### 6. åˆ†ææŠ¥å‘Š
- è¡Œä¸šåˆ†æ
- å› å­è´¡çŒ®åº¦åˆ†æ

![åˆ†ææŠ¥å‘Šç•Œé¢](./images/1-15.png)

![è¡Œä¸šåˆ†æ](./images/1-16.png)

#### 7. å›æµ‹éªŒè¯
- å•ç­–ç•¥å›æµ‹
- å¤šç­–ç•¥æ¯”è¾ƒ

![å›æµ‹éªŒè¯ç•Œé¢](./images/1-17.png)

![å›æµ‹ç»“æœ](./images/1-18.png)

![ç­–ç•¥æ¯”è¾ƒ](./images/1-19.png)

### APIæ¥å£ä½¿ç”¨

![APIæ¥å£æ–‡æ¡£](./images/1-20.png)

#### å› å­ç›¸å…³æ¥å£
```python
import requests

# è·å–å› å­åˆ—è¡¨
response = requests.get('http://localhost:5000/api/ml-factor/factors/list')

# åˆ›å»ºè‡ªå®šä¹‰å› å­
factor_data = {
    "factor_id": "custom_momentum",
    "factor_name": "è‡ªå®šä¹‰åŠ¨é‡å› å­",
    "factor_type": "momentum",
    "factor_formula": "close.pct_change(10)",
    "description": "10æ—¥ä»·æ ¼å˜åŒ–ç‡"
}
response = requests.post('http://localhost:5000/api/ml-factor/factors/custom', json=factor_data)

# è®¡ç®—å› å­å€¼
calc_data = {
    "trade_date": "2024-01-15",
    "factor_ids": ["momentum_1d", "momentum_5d"]
}
response = requests.post('http://localhost:5000/api/ml-factor/factors/calculate', json=calc_data)
```

#### æ¨¡å‹ç›¸å…³æ¥å£
```python
# åˆ›å»ºæ¨¡å‹
model_data = {
    "model_id": "my_xgb_model",
    "model_name": "æˆ‘çš„XGBoostæ¨¡å‹",
    "model_type": "xgboost",
    "factor_list": ["momentum_1d", "momentum_5d", "volatility_20d"],
    "target_type": "return_5d"
}
response = requests.post('http://localhost:5000/api/ml-factor/models/create', json=model_data)

# è®­ç»ƒæ¨¡å‹
train_data = {
    "model_id": "my_xgb_model",
    "start_date": "2023-01-01",
    "end_date": "2023-12-31"
}
response = requests.post('http://localhost:5000/api/ml-factor/models/train', json=train_data)
```

#### é€‰è‚¡ç›¸å…³æ¥å£
```python
# åŸºäºå› å­é€‰è‚¡
selection_data = {
    "trade_date": "2024-01-15",
    "factor_list": ["momentum_1d", "momentum_5d"],
    "method": "equal_weight",
    "top_n": 50
}
response = requests.post('http://localhost:5000/api/ml-factor/scoring/factor-based', json=selection_data)

# åŸºäºMLæ¨¡å‹é€‰è‚¡
ml_selection_data = {
    "trade_date": "2024-01-15",
    "model_ids": ["my_xgb_model"],
    "top_n": 50
}
response = requests.post('http://localhost:5000/api/ml-factor/scoring/ml-based', json=ml_selection_data)
```

#### ç»„åˆä¼˜åŒ–æ¥å£
```python
# ç»„åˆä¼˜åŒ–
optimization_data = {
    "expected_returns": {"000001.SZ": 0.05, "000002.SZ": 0.03},
    "method": "mean_variance",
    "constraints": {
        "max_weight": 0.1,
        "risk_aversion": 1.0
    }
}
response = requests.post('http://localhost:5000/api/ml-factor/portfolio/optimize', json=optimization_data)
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

![ç³»ç»Ÿæ¶æ„å›¾](./images/1-21.png)

### ç›®å½•ç»“æ„
```
stock_analysis/
â”œâ”€â”€ app/                    # åº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ api/               # APIæ¥å£
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ routes/            # è·¯ç”±
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ templates/             # HTMLæ¨¡æ¿
â”œâ”€â”€ static/               # é™æ€æ–‡ä»¶
â”œâ”€â”€ examples/             # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ config.py             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt      # ä¾èµ–åŒ…
â”œâ”€â”€ run_system.py         # ç³»ç»Ÿå¯åŠ¨å™¨
â””â”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
```

### æ ¸å¿ƒæ¨¡å—

#### 1. å› å­å¼•æ“ (FactorEngine)
- å› å­å®šä¹‰ç®¡ç†
- å› å­å€¼è®¡ç®—
- æ”¯æŒè‡ªå®šä¹‰å…¬å¼

#### 2. æœºå™¨å­¦ä¹ ç®¡ç†å™¨ (MLModelManager)
- æ¨¡å‹åˆ›å»ºå’Œè®­ç»ƒ
- é¢„æµ‹å’Œè¯„ä¼°
- æ”¯æŒå¤šç§ç®—æ³•

#### 3. è‚¡ç¥¨æ‰“åˆ†å¼•æ“ (StockScoringEngine)
- å› å­æ‰“åˆ†
- MLæ¨¡å‹æ‰“åˆ†
- ç»¼åˆè¯„åˆ†

#### 4. ç»„åˆä¼˜åŒ–å™¨ (PortfolioOptimizer)
- å¤šç§ä¼˜åŒ–ç®—æ³•
- çº¦æŸæ¡ä»¶æ”¯æŒ
- é£é™©æ¨¡å‹ä¼°è®¡

#### 5. å›æµ‹å¼•æ“ (BacktestEngine)
- ç­–ç•¥å›æµ‹
- æ€§èƒ½æŒ‡æ ‡è®¡ç®—
- å¤šç­–ç•¥æ¯”è¾ƒ

## ğŸ“Š å†…ç½®å› å­

### åŠ¨é‡å› å­
- `momentum_1d`: 1æ—¥åŠ¨é‡
- `momentum_5d`: 5æ—¥åŠ¨é‡
- `momentum_20d`: 20æ—¥åŠ¨é‡

### æ³¢åŠ¨ç‡å› å­
- `volatility_20d`: 20æ—¥æ³¢åŠ¨ç‡

### æŠ€æœ¯æŒ‡æ ‡
- `rsi_14`: RSIç›¸å¯¹å¼ºå¼±æŒ‡æ ‡

### æˆäº¤é‡å› å­
- `turnover_rate`: æ¢æ‰‹ç‡

### åŸºæœ¬é¢å› å­
- `pe_ratio`: å¸‚ç›ˆç‡
- `pb_ratio`: å¸‚å‡€ç‡
- `roe`: å‡€èµ„äº§æ”¶ç›Šç‡
- `debt_ratio`: èµ„äº§è´Ÿå€ºç‡
- `current_ratio`: æµåŠ¨æ¯”ç‡
- `gross_margin`: æ¯›åˆ©ç‡

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®
åœ¨ `config.py` ä¸­ä¿®æ”¹æ•°æ®åº“è¿æ¥ï¼š

```python
# SQLite (é»˜è®¤)
SQLALCHEMY_DATABASE_URI = 'sqlite:///stock_analysis.db'

# MySQL
SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://user:password@localhost/stock_analysis'
```

### æ—¥å¿—é…ç½®
```python
LOG_LEVEL = 'INFO'
LOG_FILE = 'logs/app.log'
```

## ğŸ§ª è¿è¡Œæ¼”ç¤º

ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„åŠŸèƒ½æ¼”ç¤ºï¼š

```bash
# è¿è¡Œå®Œæ•´æ¼”ç¤º
python examples/complete_system_example.py

# æˆ–é€šè¿‡å¯åŠ¨å™¨è¿è¡Œ
python run_system.py
# é€‰æ‹© "5. è¿è¡Œç³»ç»Ÿæ¼”ç¤º"
```

![ç³»ç»Ÿæ¼”ç¤º](./images/1-22.png)

æ¼”ç¤ºå†…å®¹åŒ…æ‹¬ï¼š
1. å› å­ç®¡ç†æ¼”ç¤º
2. æ¨¡å‹ç®¡ç†æ¼”ç¤º
3. è‚¡ç¥¨é€‰æ‹©æ¼”ç¤º
4. ç»„åˆä¼˜åŒ–æ¼”ç¤º
5. é›†æˆé€‰è‚¡å’Œä¼˜åŒ–æ¼”ç¤º
6. å›æµ‹éªŒè¯æ¼”ç¤º
7. åˆ†æåŠŸèƒ½æ¼”ç¤º

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

ç³»ç»Ÿæ”¯æŒçš„å›æµ‹æŒ‡æ ‡ï¼š
- æ€»æ”¶ç›Šç‡
- å¹´åŒ–æ”¶ç›Šç‡
- å¹´åŒ–æ³¢åŠ¨ç‡
- å¤æ™®æ¯”ç‡
- æœ€å¤§å›æ’¤
- èƒœç‡
- å¡å°”ç›æ¯”ç‡

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ è‡ªå®šä¹‰å› å­
1. åœ¨å› å­ç®¡ç†ç•Œé¢åˆ›å»ºå› å­å®šä¹‰
2. ç¼–å†™å› å­è®¡ç®—å…¬å¼
3. æµ‹è¯•å› å­è®¡ç®—ç»“æœ

### æ‰©å±•æœºå™¨å­¦ä¹ æ¨¡å‹
1. åœ¨ `MLModelManager` ä¸­æ·»åŠ æ–°ç®—æ³•
2. å®ç°è®­ç»ƒå’Œé¢„æµ‹æ–¹æ³•
3. æ›´æ–°APIæ¥å£

### æ·»åŠ ä¼˜åŒ–ç®—æ³•
1. åœ¨ `PortfolioOptimizer` ä¸­å®ç°æ–°æ–¹æ³•
2. æ·»åŠ çº¦æŸæ¡ä»¶æ”¯æŒ
3. æµ‹è¯•ä¼˜åŒ–ç»“æœ

## ğŸ› æ•…éšœæ’é™¤

### âš ï¸ ä¾èµ–åŒ…å…¼å®¹æ€§é—®é¢˜

å¦‚æœé‡åˆ° `empyrical` æˆ– `TA-Lib` å®‰è£…å¤±è´¥ï¼Œè¯·ä½¿ç”¨ä¿®å¤ç‰ˆå¯åŠ¨è„šæœ¬ï¼š

```bash
# ä½¿ç”¨ä¿®å¤ç‰ˆå¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰
python quick_start_fixed.py

# æˆ–ä½¿ç”¨æœ€å°åŒ–ä¾èµ–
pip install -r requirements_minimal.txt
```

è¯¦ç»†è§£å†³æ–¹æ¡ˆè¯·æŸ¥çœ‹ï¼š[å®‰è£…æŒ‡å—](INSTALL_GUIDE.md)

### å¸¸è§é—®é¢˜

1. **ä¾èµ–åŒ…å®‰è£…å¤±è´¥**
   ```bash
   # æ–¹æ¡ˆ1ï¼šä½¿ç”¨ä¿®å¤ç‰ˆå¯åŠ¨è„šæœ¬
   python quick_start_fixed.py
   
   # æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨å®‰è£…æ ¸å¿ƒä¾èµ–
   pip install Flask pandas numpy scikit-learn
   
   # æ–¹æ¡ˆ3ï¼šä½¿ç”¨å›½å†…é•œåƒ
   pip install -r requirements_minimal.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
   ```

2. **Pythonç‰ˆæœ¬å…¼å®¹æ€§**
   - æ¨èä½¿ç”¨ Python 3.8-3.11
   - Python 3.12 å¯èƒ½æœ‰éƒ¨åˆ†åŒ…å…¼å®¹æ€§é—®é¢˜
   - ä½¿ç”¨ä¿®å¤ç‰ˆè„šæœ¬å¯ä»¥è‡ªåŠ¨å¤„ç†

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“é…ç½®
   - ç¡®ä¿æ•°æ®åº“æœåŠ¡è¿è¡Œ
   - éªŒè¯è¿æ¥æƒé™

4. **å› å­è®¡ç®—å¤±è´¥**
   - æ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨
   - éªŒè¯å› å­å…¬å¼è¯­æ³•
   - æŸ¥çœ‹æ—¥å¿—é”™è¯¯ä¿¡æ¯

5. **æ¨¡å‹è®­ç»ƒå¤±è´¥**
   - ç¡®ä¿æœ‰è¶³å¤Ÿçš„è®­ç»ƒæ•°æ®
   - æ£€æŸ¥å› å­æ•°æ®å®Œæ•´æ€§
   - è°ƒæ•´æ¨¡å‹å‚æ•°

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-06-01)
- å®Œæ•´çš„å¤šå› å­é€‰è‚¡ç³»ç»Ÿ
- æ”¯æŒå› å­ç®¡ç†å’Œè®¡ç®—
- æœºå™¨å­¦ä¹ æ¨¡å‹é›†æˆ
- ç»„åˆä¼˜åŒ–åŠŸèƒ½
- å›æµ‹éªŒè¯å¼•æ“
- Webç•Œé¢å’ŒAPIæ¥å£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤Issue
- å‘é€é‚®ä»¶ï¼š39189996@qq.com

---

**å¤šå› å­é€‰è‚¡ç³»ç»Ÿ** - è®©é‡åŒ–æŠ•èµ„æ›´ç®€å•ï¼ 
